Test Case: linux_instances
================================================================================

Initial Error:
Error: Unsupported attribute
  on azapi.tf line 97, in resource "azapi_update_resource" "update0":
  97:     ignore_changes = [all]
This object has no argument, nested block, or exported attribute named "all".

Fix Process:

Attempt 1:
- Problem Analysis: The lifecycle block uses ignore_changes = [all] with brackets, but Terraform requires ignore_changes = all without brackets when ignoring all attributes.
- Fix Method: Remove brackets around 'all' in the ignore_changes statement
- Changes Made: Modified azapi.tf line 97 from 'ignore_changes = [all]' to 'ignore_changes = all'
- Result: Testing...

Final Result: Fix successful

Step 3 Analysis:
After applying the fix, terraform plan showed drift in diskSizeGB field (30 -> null).
This is an acceptable drift according to acceptable_drift_patterns.md section 2:
- diskSizeGB is marked as Optional: true, Computed: true in provider schema
- Azure API returns the computed value (30) based on the image
- AzAPI with ignore_null_property removes this computed default value
- This is expected behavior for Optional+Computed fields during migration

Attempt 2:
- Problem Analysis: Azure API error "NetworkApiVersionMustBeSpecifiedWithNetworkInterfaceConfigurations" - when updating the VMSS with diskSizeGB set to null, Azure requires networkApiVersion to be explicitly specified in the network profile. The azurerm provider has a default of "2020-11-01" which was being set automatically, but AzAPI requires explicit specification.
- Fix Method: Add network_api_version = "2020-11-01" parameter to the module call to match azurerm provider default
- Changes Made: Added network_api_version = "2020-11-01" to module call in azapi.tf
- Result: Testing...
